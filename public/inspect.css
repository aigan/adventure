/* Inspect-specific styles (extends styles.css) */

/*
  Following open-props.style philosophy:
  - All values as CSS custom properties
  - Consistent naming patterns
  - Predictable scales
*/

:root {
	/* ============================================
	   Color Palette - Green-tinted dark theme
	   ============================================ */

	/* Surfaces - layered from dark to light */
	--surface-1: #242;             /* body background */
	--surface-2: #2a3a2a;          /* panels, cards */
	--surface-2-muted: #2a332a;    /* meta-traits (less saturated) */
	--surface-3: #313d31;          /* elevated (table rows) */
	--surface-3-hover: #333d33;    /* meta-traits hover */
	--surface-4: #354035;          /* more elevated (state-chip) */
	--surface-4-current: #354535;  /* current state highlight */
	--surface-5: #3a4a3a;          /* hover states */
	--surface-6: #405040;          /* active hover */
	--surface-invert: #222;        /* dark text on light bg */
	--surface-detail-hover: #343;  /* details summary hover */
	--surface-code: #111;          /* code blocks */

	/* Borders - green-tinted to match theme */
	--border-default: #4a5a4a;
	--border-muted: #454;

	/* Text colors */
	--text-muted-1: #686;          /* very muted */
	--text-muted-2: #797;          /* muted */
	--text-muted-3: #888;          /* slightly muted */
	--text-muted-4: #aa9;          /* section headers */

	/* Semantic accent colors */
	--accent-mind: var(--color-link);   /* mind chips - blue */
	--accent-belief: #9d9;              /* belief chips - green */
	--accent-trait: #fb8;               /* trait labels - orange/gold */
	--accent-warning: #fa0;             /* mutable badge - orange */
	--accent-meta: #8a8;                /* meta traits - muted green */
	--accent-probability: #8cf;         /* probability values - blue */

	/* State colors */
	--color-error: #c99;
	--color-error-muted: #a88;
	--color-unavailable: #886;


	/* ============================================
	   Spacing Scale (rem-based)
	   ============================================ */
	--space-0: 0;
	--space-1: 0.15rem;
	--space-2: 0.25rem;
	--space-3: 0.35rem;
	--space-4: 0.5rem;
	--space-5: 0.65rem;
	--space-6: 0.75rem;
	--space-7: 1rem;
	--space-8: 1.25rem;
	--space-9: 1.5rem;
	--space-10: 2rem;

	/* ============================================
	   Border Radius Scale
	   ============================================ */
	--radius-1: 3px;
	--radius-2: 4px;
	--radius-3: 8px;

	/* ============================================
	   Font Size Scale
	   ============================================ */
	--font-size-0: 0.7rem;
	--font-size-1: 0.8rem;
	--font-size-2: 0.85rem;
	--font-size-3: 0.9rem;
	--font-size-4: 1rem;
	--font-size-5: 1.2rem;
	--font-size-6: 1.5rem;

	/* Relative font sizes (for nested contexts) */
	--font-size-rel-1: 0.75em;
	--font-size-rel-2: 0.85em;
	--font-size-rel-3: 0.9em;

	/* ============================================
	   Border Widths
	   ============================================ */
	--border-1: 1px;
	--border-2: 3px;

	/* ============================================
	   Transitions
	   ============================================ */
	--transition-fast: 0.15s;

	/* ============================================
	   Hover Effects
	   ============================================ */
	--hover-lighten: 0.12;

	/* ============================================
	   Chip color-mix percentages
	   ============================================ */
	--chip-bg: 10%;
	--chip-bg-hover: 20%;
	--chip-bg-current: 18%;
	--chip-bg-current-hover: 25%;
	--chip-border: 30%;
	--chip-border-hover: 45%;
	--chip-border-current: 50%;
	--chip-border-current-hover: 60%;
}

/* ============================================
   Base Overrides
   ============================================ */

body {
	background: var(--surface-1);
	margin: var(--space-0);
}

/* Links - background highlight instead of underline */
a {
	padding: var(--space-1) var(--space-3);
	margin: calc(-1 * var(--space-1)) calc(-1 * var(--space-3));
	border-radius: var(--radius-1);
	transition: background var(--transition-fast);
}

a:hover {
	text-decoration: none;
	background: color-mix(in srgb, var(--color-link) 15%, transparent);
}

/* Header */
body > header {
	margin: var(--space-9) var(--space-9) var(--space-0);
	font-size: var(--font-size-5);
}

/* ============================================
   Path Bar (Navigation)
   ============================================ */

.path-bar {
	display: flex;
	align-items: center;
	flex-wrap: wrap;
	gap: var(--space-6);
	padding: var(--space-7) var(--space-9);
	background: var(--surface-2);
	border-bottom: var(--border-1) solid var(--border-default);
}

.path-bar .sep {
	color: var(--text-muted-1);
}

/* ============================================
   Chips (Mind, Belief, Trait tags)
   ============================================ */

.chip {
	display: inline-flex;
	align-items: center;
	gap: var(--space-4);
	padding: var(--space-3) var(--space-5);
	margin: var(--space-0);
	border-radius: var(--radius-2);
	text-decoration: none;
	border: var(--border-1) solid transparent;
	transition: background var(--transition-fast), border-color var(--transition-fast);
}

.chip .vt,
.chip .type {
	color: var(--text-muted-2);
}

/* Mind chips */
.chip.mind {
	color: var(--accent-mind);
	background: color-mix(in srgb, var(--accent-mind) var(--chip-bg), transparent);
	border-color: color-mix(in srgb, var(--accent-mind) var(--chip-border), transparent);
}

.chip.mind:hover {
	background: color-mix(in srgb, var(--accent-mind) var(--chip-bg-hover), transparent) !important;
	border-color: color-mix(in srgb, var(--accent-mind) var(--chip-border-hover), transparent);
}

.chip.mind.current {
	background: color-mix(in srgb, var(--accent-mind) var(--chip-bg-current), transparent);
	border-color: color-mix(in srgb, var(--accent-mind) var(--chip-border-current), transparent);
}

.chip.mind.current:hover {
	background: color-mix(in srgb, var(--accent-mind) var(--chip-bg-current-hover), transparent) !important;
	border-color: color-mix(in srgb, var(--accent-mind) var(--chip-border-current-hover), transparent);
}

/* Belief chips */
.chip.belief {
	color: var(--accent-belief);
	background: color-mix(in srgb, var(--accent-belief) var(--chip-bg), transparent);
	border-color: color-mix(in srgb, var(--accent-belief) var(--chip-border), transparent);
}

.chip.belief:hover {
	background: color-mix(in srgb, var(--accent-belief) var(--chip-bg-hover), transparent) !important;
	border-color: color-mix(in srgb, var(--accent-belief) var(--chip-border-hover), transparent);
}

.chip.belief.current {
	background: color-mix(in srgb, var(--accent-belief) var(--chip-bg-current), transparent);
	border-color: color-mix(in srgb, var(--accent-belief) var(--chip-border-current), transparent);
}

.chip.belief.current:hover {
	background: color-mix(in srgb, var(--accent-belief) var(--chip-bg-current-hover), transparent) !important;
	border-color: color-mix(in srgb, var(--accent-belief) var(--chip-border-current-hover), transparent);
}

/* Trait chips */
.chip.trait {
	color: var(--accent-trait);
	background: color-mix(in srgb, var(--accent-trait) var(--chip-bg), transparent);
	border-color: color-mix(in srgb, var(--accent-trait) var(--chip-border), transparent);
}

.chip.trait.current {
	background: color-mix(in srgb, var(--accent-trait) var(--chip-bg-current), transparent);
	border-color: color-mix(in srgb, var(--accent-trait) var(--chip-border-current), transparent);
}

.chip.trait .chip-value {
	color: var(--color-text);
	font-weight: normal;
	padding-left: var(--space-3);
	border-left: var(--border-1) solid var(--border-muted);
	margin-left: var(--space-2);
}

/* ============================================
   Badge
   ============================================ */

.badge {
	margin-left: auto;
	padding: var(--space-2) var(--space-4);
	font-size: var(--font-size-1);
	font-weight: 600;
	border-radius: var(--radius-1);
}

.badge.mutable {
	color: var(--accent-warning);
	border: var(--border-1) solid var(--accent-warning);
	background: color-mix(in srgb, var(--accent-warning) 15%, transparent);
}

/* ============================================
   State Table
   ============================================ */

.state-table {
	display: grid;
	grid-template-columns: 1fr 1.5fr 1fr;
	background: var(--surface-2);
	border-bottom: var(--border-1) solid var(--border-default);
}

.state-table > div {
	padding: var(--space-6) var(--space-9);
}

.state-table > div + div {
	border-left: var(--border-1) solid var(--border-default);
}

.state-table > .current {
	background: var(--surface-4-current);
}

.col-header {
	color: var(--text-muted-2);
	font-size: var(--font-size-1);
	text-transform: uppercase;
	letter-spacing: 0.08em;
	margin-bottom: var(--space-4);
}

.states {
	display: flex;
	flex-wrap: wrap;
	gap: var(--space-4);
}

.state-chip {
	position: relative;
	padding: var(--space-3) var(--space-5);
	margin: var(--space-0);
	background: var(--surface-4);
	border-radius: var(--radius-2);
	color: var(--color-link);
	text-decoration: none;
}

.state-chip::before {
	content: '';
	position: absolute;
	inset: 0;
	border-radius: inherit;
	background: white;
	opacity: 0;
	transition: opacity var(--transition-fast);
	pointer-events: none;
}

.state-chip:hover::before {
	opacity: var(--hover-lighten, 0.12);
}

.state-chip.active {
	background: var(--color-link);
	color: var(--surface-invert);
	font-weight: 600;
}

.origin-marker {
	color: var(--accent-probability);
	font-style: italic;
	font-size: var(--font-size-rel-3);
}

/* ============================================
   Main Content
   ============================================ */

body > main {
	margin: var(--space-9);
}

main section {
	background: var(--surface-2);
	border: var(--border-1) solid var(--border-default);
	border-radius: var(--radius-3);
	padding: var(--space-8);
	margin-bottom: var(--space-8);
}

section h2 {
	color: var(--text-muted-4);
	font-size: var(--font-size-2);
	font-weight: 500;
	text-transform: uppercase;
	letter-spacing: 0.1em;
	margin: var(--space-0) var(--space-0) var(--space-7) var(--space-0);
	padding-bottom: var(--space-6);
	border-bottom: var(--border-1) solid var(--border-default);
}

/* ============================================
   Definition Lists
   ============================================ */

dl {
	dt {
		font-weight: bold;
		margin-top: var(--space-6);

		&:first-child {
			margin-top: var(--space-0);
		}
	}
	dd {
		margin-left: var(--space-9);
		margin-top: var(--space-2);
	}
}

dl.compact {
	margin: var(--space-0);
	display: grid;
	grid-template-columns: auto 1fr;
	gap: var(--space-2) var(--space-7);
}

dl.compact dt {
	color: var(--text-muted-2);
	font-weight: normal;
}

dl.compact dd {
	margin: var(--space-0);
}

.vt {
	color: var(--text-muted-2);
	font-size: var(--font-size-rel-3);
}

/* ============================================
   Traits Table
   ============================================ */

table.traits {
	width: 100%;
	border-collapse: separate;
	border-spacing: var(--space-0) var(--space-2);
}

table.traits th,
table.traits td {
	--_padding-block: var(--space-5);
	--_padding-inline: var(--space-7);
	padding: var(--_padding-block) var(--_padding-inline);
	text-align: left;
}

table.traits tr {
	position: relative;
	background: var(--surface-3);
	border-radius: var(--radius-2);
}

table.traits tr:hover {
	background: var(--surface-5);
}

table.traits th {
	width: 9rem;
	font-weight: 600;
	color: var(--accent-trait);
	border-left: var(--border-2) solid var(--accent-trait);
	border-radius: var(--radius-2) var(--space-0) var(--space-0) var(--radius-2);
}

table.traits th a {
	color: var(--accent-trait);
	text-decoration: none;
}

table.traits th a::after {
	content: '';
	position: absolute;
	inset: var(--space-0);
}

/* Disable th overlay when td has multiple links */
table.traits tr:has(td a:not(:only-of-type)) th a {
	padding-block: var(--_padding-block);
	padding-inline: var(--_padding-inline);
	margin-block: calc(-1 * var(--_padding-block));
	margin-inline: calc(-1 * var(--_padding-inline));
}

table.traits tr:has(td a:not(:only-of-type)) th a::after {
	content: none;
}

table.traits td {
	border-radius: var(--space-0) var(--radius-2) var(--radius-2) var(--space-0);
}

/* Beliefs list table */
table.traits.beliefs-list th:first-child,
table.traits.beliefs-list td:first-child {
	width: 20rem;
	white-space: nowrap;
}

table.traits.beliefs-list th:last-child,
table.traits.beliefs-list td:last-child {
	width: auto;
}

table.traits td a {
	padding: var(--space-0);
	margin: var(--space-0);
	color: var(--color-link);
	text-decoration: none;
}

table.traits td a:only-of-type::after {
	content: '';
	position: absolute;
	inset: var(--space-0);
}

table.traits td a:hover {
	color: var(--color-link-hover);
	background: transparent !important;
}

/* Multi-link cells */
table.traits td a:not(:only-of-type) {
	padding-block: var(--_padding-block);
	padding-inline: calc(var(--_padding-inline) / 2);
	margin-block: calc(-1 * var(--_padding-block));
}

table.traits td a:not(:only-of-type):hover {
	background: color-mix(in srgb, var(--color-link) 15%, transparent) !important;
}

/* Meta-traits (@about, @form, etc.) */
table.traits tr.meta {
	background: var(--surface-2-muted);
}

table.traits tr.meta:hover {
	background: var(--surface-3-hover);
}

table.traits tr.meta th {
	color: var(--accent-meta);
	border-left-color: var(--text-muted-1);
	font-weight: 500;
}

/* ============================================
   Details / Collapsible
   ============================================ */

details {
	margin-top: var(--space-8);

	summary {
		cursor: pointer;
		font-weight: bold;
		padding: var(--space-4) var(--space-6);
		border-radius: var(--radius-2);

		&:hover {
			background: var(--surface-detail-hover);
		}
	}
}

pre {
	background: var(--surface-code);
	padding: var(--space-7);
	border-radius: var(--radius-2);
	overflow-x: auto;
	margin-top: var(--space-6);
}

/* ============================================
   Footer
   ============================================ */

footer.version {
	position: fixed;
	bottom: var(--space-4);
	right: var(--space-4);
	color: var(--text-muted-1);
	font-size: var(--font-size-0);
	opacity: 0.5;
	pointer-events: none;
}

/* ============================================
   Trait Value Display
   ============================================ */

.trait-value-display .value-box {
	display: flex;
	align-items: center;
	gap: var(--space-7);
	padding: var(--space-7);
	background: var(--surface-2);
	border-radius: var(--radius-2);
	border-left: var(--border-2) solid var(--accent-trait);
}

.value-content {
	font-size: var(--font-size-6);
	font-weight: 600;
}

/* ============================================
   Trait History
   ============================================ */

.history-list {
	display: flex;
	flex-direction: column;
	gap: var(--space-2);
}

.history-item {
	display: grid;
	grid-template-columns: auto 1fr auto;
	gap: var(--space-7);
	padding: var(--space-3) var(--space-5);
	border-radius: var(--radius-1);
	background: var(--surface-2);
}

.history-item.current {
	background: color-mix(in srgb, var(--accent-trait) 15%, var(--surface-2));
}

.history-state {
	font-size: var(--font-size-rel-2);
}

.history-value {
	color: var(--color-text);
}

.history-vt {
	font-size: var(--font-size-rel-1);
	color: var(--text-muted-2);
	font-variant-numeric: tabular-nums;
}

/* ============================================
   Utility States
   ============================================ */

.source-note {
	color: var(--text-muted-3);
	font-size: var(--font-size-rel-2);
}

.unavailable {
	color: var(--color-unavailable);
	font-style: italic;
}

/* Not found section */
section.not-found {
	text-align: center;
	padding: var(--space-10);
	color: var(--color-error-muted);
}

section.not-found h2 {
	color: var(--color-error);
	margin-bottom: var(--space-7);
}

section.not-found .detail {
	font-size: var(--font-size-rel-3);
	color: var(--color-unavailable);
}

/* ============================================
   Fuzzy Values (Uncertain/Superposition)
   ============================================ */

.fuzzy-unknown {
	font-size: var(--font-size-5);
	cursor: help;
}

.fuzzy-compact {
	cursor: help;
	opacity: 0.8;
}

.fuzzy-superposition {
	display: inline-table;
	border-collapse: collapse;
	font-size: var(--font-size-rel-3);
	border-radius: var(--radius-2);
	overflow: hidden;
}

.fuzzy-superposition td {
	padding: var(--space-3) var(--space-5);
	text-align: left;
}

.fuzzy-superposition td:last-child {
	text-align: right;
	color: var(--accent-probability);
	font-variant-numeric: tabular-nums;
}

.fuzzy-superposition tr:nth-child(odd) td {
	background: rgba(0, 0, 0, 0.1);
}

.fuzzy-superposition tr:nth-child(even) td {
	background: rgba(0, 0, 0, 0.05);
}

/* Hover effect for individual alternatives */
.fuzzy-superposition tbody tr:hover td {
	background: rgba(0, 0, 0, 0.15);
}

/* Disable parent trait row hover when hovering fuzzy table */
table.traits tr:has(.fuzzy-superposition):hover {
	background: var(--surface-3);
}

/* Disable the overlay link effect on rows with fuzzy values */
table.traits tr:has(.fuzzy-superposition) th a::after {
	content: none;
}

/* Make fuzzy table links work independently */
.fuzzy-superposition a {
	position: relative;
	z-index: 1;
}
